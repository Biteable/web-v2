{{drop-zone
  message="Drop to fill canvas from template!"
  draggingOver=(mut draggingOver)
  showDropzone=showDropzone}}

<div local-class="aside">
  <div local-class="aside-section">
    <div local-class="aside-item">
      {{#link-to 'team'}}
        {{svg-jar "ArrowLeft" height="32" width="32"}}
      {{/link-to}}
    </div>
  </div>

  <div local-class="aside-section">
    <div local-class="aside-item aside-item--active">{{svg-jar "AlignLeft" height="32" width="32"}}</div>
    <div local-class="aside-item aside-item--disabled">{{svg-jar "Activity" height="32" width="32"}}</div>
    <div local-class="aside-item aside-item--disabled">{{svg-jar "Gear" height="32" width="32"}}</div>
  </div>

  <div local-class="aside-item"></div>
</div>

<div local-class="main">
  {{#if canvas.isTemplate}}
    <div local-class="message">
      <div local-class="message-content">
        Youâ€™re editing a template. To create a new canvas click <strong>Use
        Template</strong>.
      </div>
    </div>
  {{/if}}

  {{#if showFilter}}
    <div local-class="filter">
      <div local-class="filter-content">
        {{input type='text' value=filterTerm placeholder='Filter canvas...' autofocus=true}}

        <button onclick={{action (toggle-action 'showFilter' this)}} local-class='filter-close'>
          {{svg-jar 'Close' height=24 width=24}}
        </button>
      </div>
    </div>
  {{/if}}

  <div local-class="editor">
    {{canvas-editor-next
      editingEnabled=(unless isFiltered connected)
      fetchTemplates=(action 'fetchTemplates')
      filterTerm=filterTerm
      onBlockContentUpdatedLocally=(action 'blockContentUpdatedLocally')
      onBlockReplacedLocally=(action 'blockReplacedLocally')
      onNewBlockInsertedLocally=(action 'newBlockInsertedLocally')
      onBlockDeletedLocally=(action 'blockDeletedLocally')
      onBlockMetaReplacedLocally=(action 'blockMetaReplacedLocally')
      unfurlBlock=(action 'unfurlBlock')
      canvas=canvas
      githubAuthComponent=(component 'github-oauth')
      titleActionsComponent=(component 'canvas-title-actions'
                             canvas=canvas
                             onUseTemplate=(route-action 'createFromTemplate')
                             onDeleteCanvas=(route-action 'onDeleteCanvas')
                             toggleShowFilter=(toggle 'showFilter' this)
                             isTemplate=canvas.isTemplate)
      titleBylineComponent=(component 'canvas-title-byline'
                            canvas=canvas
                            updateCanvasChannels=(route-action 'updateCanvasChannels'))}}
  </div>
</div>
